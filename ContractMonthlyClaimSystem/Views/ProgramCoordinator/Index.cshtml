@model ReviewerClaimsViewModel
@* AI Disclosure: ChatGPT assisted in creating this. Link: https://chatgpt.com/share/68ca99b5-dc0c-800b-b554-c315e49df063 *@

@{
    ViewData["Title"] = "Program Coordinator - Claims";
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}
@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<!-- AutoReview Actions -->
<div class="d-flex justify-content-between align-items-center mb-3">

    <!-- Run AutoReview -->
    <form asp-controller="AutoReviewRules" asp-action="AutoReview" method="post" class="m-0">
        <input type="hidden" name="returnUrl" value="@Url.Action("Index", "ProgramCoordinator")" />
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-lightning-charge-fill"></i> Run Auto Review
        </button>
    </form>

    <!-- Configure Auto Review Rules -->
    <a asp-controller="AutoReviewRules" asp-action="Index" class="btn btn-outline-secondary">
        <i class="bi bi-sliders"></i> Configure Auto Review Rules
    </a>

</div>

<!-- Pending Claims -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-warning text-white fw-bold">
        <i class="bi bi-hourglass-split"></i> Pending Claims
    </div>
    <div class="card-body">
        @if (Model.PendingClaims.Any())
        {
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Lecturer</th>
                        <th>Module</th>
                        <th>Payment Amount</th>
                        <th>Program Coordinator</th>
                        <th>Academic Manager</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var claim in Model.PendingClaims)
                    {
                        <tr>
                            <td>@claim.LecturerName</td>
                            <td>@claim.ModuleName</td>
                            <td class="fw-semibold">@claim.PaymentAmount.ToString("R0.00")</td>
                            <td><span class="badge @claim.ProgramCoordinatorDecision.ToBgClass()">@claim.ProgramCoordinatorDecision</span></td>
                            <td><span class="badge @claim.AcademicManagerDecision.ToBgClass()">@claim.AcademicManagerDecision</span></td>
                            <td><span class="badge @claim.ClaimStatus.ToBgClass()">@claim.ClaimStatus</span></td>
                            <td>
                                <a asp-action="ClaimDetails" asp-route-id="@claim.Id" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-eye"></i> Details
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted"><em>No pending claims.</em></p>
        }
    </div>
</div>

<!-- Pending Confirmation -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-info text-white fw-bold">
        <i class="bi bi-hourglass-top"></i> Pending Confirmation
    </div>
    <div class="card-body">
        @if (Model.PendingConfirmClaims.Any())
        {
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Lecturer</th>
                        <th>Module</th>
                        <th>Payment Amount</th>
                        <th>Program Coordinator</th>
                        <th>Academic Manager</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var claim in Model.PendingConfirmClaims)
                    {
                        <tr>
                            <td>@claim.LecturerName</td>
                            <td>@claim.ModuleName</td>
                            <td class="fw-semibold">@claim.PaymentAmount.ToString("R0.00")</td>
                            <td><span class="badge @claim.ProgramCoordinatorDecision.ToBgClass()">@claim.ProgramCoordinatorDecision</span></td>
                            <td><span class="badge @claim.AcademicManagerDecision.ToBgClass()">@claim.AcademicManagerDecision</span></td>
                            <td><span class="badge @claim.ClaimStatus.ToBgClass()">@claim.ClaimStatus</span></td>
                            <td>
                                <a asp-action="ClaimDetails" asp-route-id="@claim.Id" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-eye"></i> Details
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted"><em>No claims pending confirmation.</em></p>
        }
    </div>
</div>

<!-- Completed Claims -->
<div class="card shadow-sm">
    <div class="card-header bg-success text-white fw-bold">
        <i class="bi bi-check-circle"></i> Completed Claims
    </div>
    <div class="card-body">
        @if (Model.CompletedClaims.Any())
        {
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Lecturer</th>
                        <th>Module</th>
                        <th>Payment Amount</th>
                        <th>Program Coordinator</th>
                        <th>Academic Manager</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var claim in Model.CompletedClaims)
                    {
                        <tr>
                            <td>@claim.LecturerName</td>
                            <td>@claim.ModuleName</td>
                            <td class="fw-semibold">@claim.PaymentAmount.ToString("R0.00")</td>
                            <td><span class="badge @claim.ProgramCoordinatorDecision.ToBgClass()">@claim.ProgramCoordinatorDecision</span></td>
                            <td><span class="badge @claim.AcademicManagerDecision.ToBgClass()">@claim.AcademicManagerDecision</span></td>
                            <td><span class="badge @claim.ClaimStatus.ToBgClass()">@claim.ClaimStatus</span></td>
                            <td>
                                <a asp-action="ClaimDetails" asp-route-id="@claim.Id" class="btn btn-sm btn-outline-secondary">
                                    <i class="bi bi-eye"></i> View
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted"><em>No completed claims.</em></p>
        }
    </div>
</div>
