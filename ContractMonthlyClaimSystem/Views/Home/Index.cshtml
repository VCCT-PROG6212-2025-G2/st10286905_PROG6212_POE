@inject IHttpContextAccessor ctx

@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">@(User.Identity?.IsAuthenticated == true ? $"Hello, {@ctx.HttpContext?.Session.GetString("FullName")}" : "Welcome")</h1>

    @if (TempData["Error"] != null || TempData["Success"] != null)
    {
        <div class="mx-auto" style="max-width: 420px;">
            @if (TempData["Error"] != null)
            {
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    @TempData["Error"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            }
            @if (TempData["Success"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    @TempData["Success"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            }
        </div>
    }

    @if (User.Identity?.IsAuthenticated == true)
    {
        if (User.IsInRole("Admin") || User.IsInRole("Lecturer") || User.IsInRole("ProgramCoordinator") || User.IsInRole("AcademicManager") || User.IsInRole("HR"))
        {
            <p>Use the navigation bar to access your dashboard.</p>
        }
        else
        {
            <p>HR must first complete your account setup before you may access application functionality.</p>
        }
    }
    else
    {
        <p>Login to access application functionality.</p>
    }
</div>
